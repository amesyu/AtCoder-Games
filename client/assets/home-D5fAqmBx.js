import{w as _}from"./with-props-DvPqDDfd.js";import{r as j,l as a}from"./chunk-IR6S3I6Y-BvsIcvZg.js";function A(){const u=j.useRef(null),[p,b]=j.useState(null),[k,y]=j.useState([]),[S,w]=j.useState("O"),[R,N]=j.useState(null),[G,T]=j.useState(!1),[v,o]=j.useState("ゲーム開始");j.useEffect(()=>{if(u.current){const e=u.current.getContext("2d");b(e);const r=[];for(let t=0;t<3;t++){r[t]=[];for(let n=0;n<3;n++)r[t][n]=""}y(r)}},[]),j.useEffect(()=>{p&&x()},[k,p]);const x=()=>{if(!p||!u.current)return;const e=300,r=300;u.current.width=e,u.current.height=r,p.clearRect(0,0,e,r);const t=3,n=e/t;for(let c=0;c<t;c++)for(let d=0;d<t;d++){const m=d*n,h=c*n;p.strokeStyle="black",p.lineWidth=2,p.strokeRect(m,h,n,n),k[c][d]==="O"?(p.fillStyle="red",p.beginPath(),p.arc(m+n/2,h+n/2,n/3,0,2*Math.PI),p.fill()):k[c][d]==="X"&&(p.fillStyle="blue",p.beginPath(),p.arc(m+n/2,h+n/2,n/3,0,2*Math.PI),p.fill())}},C=e=>{if(!p||R||G)return;const r=u.current;if(!r)return;const t=r.getBoundingClientRect(),n=e.clientX-t.left,c=e.clientY-t.top,d=Math.floor(c/(r.height/3)),m=Math.floor(n/(r.width/3));if(k[d][m]===""){const h=[...k];h[d][m]=S,y(h),g(h)==null&&!G&&i(h)}},g=e=>{const r=[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]];for(let t of r){const[n,c,d]=t;if(e[n[0]][n[1]]&&e[n[0]][n[1]]===e[c[0]][c[1]]&&e[n[0]][n[1]]===e[d[0]][d[1]])return N(e[n[0]][n[1]]),o(e[n[0]][n[1]]+"の勝ち！"),e[n[0]][n[1]]}e.flat().every(t=>t!=="")&&(T(!0),o("引き分け！"))},i=e=>{const r=f(e);if(r){const t=[...e];t[r.i][r.j]="X",y(t),x(),g(t)}},f=e=>{const r=[];for(let t=0;t<3;t++)for(let n=0;n<3;n++)e[t][n]===""&&r.push({i:t,j:n});if(r.length>0){const t=Math.floor(Math.random()*r.length);return r[t]}return null},s=()=>{const e=[];for(let r=0;r<3;r++){e[r]=[];for(let t=0;t<3;t++)e[r][t]=""}y(e),w("O"),N(null),T(!1),o("ゲーム開始")};return a.jsxs("div",{className:"game-container",children:[a.jsx("canvas",{ref:u,onClick:C}),a.jsx("div",{className:"button-container",children:a.jsx("button",{onClick:s,children:"リセット"})}),a.jsx("p",{children:v})]})}const l=9,M=50;function E(){const[u,p]=j.useState(Array(l*l).fill(0).map(()=>Math.random()>.5?2:0)),[b,k]=j.useState("Game in Progress"),y=j.useRef(null),[S,w]=j.useState(null);j.useEffect(()=>{y.current&&w(y.current.getContext("2d"))},[]),j.useEffect(()=>{S&&R()},[u,S]);function R(){S&&(S.clearRect(0,0,l*M,l*M),u.forEach((v,o)=>{const x=o%l*M,C=Math.floor(o/l)*M;S.fillStyle=v===0?"white":v===1?"black":"gray",S.fillRect(x,C,M,M),S.strokeRect(x,C,M,M)}))}function N(v){var f;if(!S||b!=="Game in Progress")return;const o=[...u],x=(f=y.current)==null?void 0:f.getBoundingClientRect();if(!x)return;let C=Math.floor((v.clientY-x.top)/M),g=Math.floor((v.clientX-x.left)/M),i=C*l+g;if(o[i]===0){o[i]=1;for(let s=C+1;s<l;s++){let e=s*l+g;if(o[e]!==1)o[e]=1;else break}for(let s=C-1;s>=0;s--){let e=s*l+g;if(o[e]!==1)o[e]=1;else break}for(let s=g+1;s<l;s++){let e=C*l+s;if(o[e]!==1)o[e]=1;else break}for(let s=g-1;s>=0;s--){let e=C*l+s;if(o[e]!==1)o[e]=1;else break}if(G(o)){console.log("You Win!"),k("You Win!"),p(o);return}if(i=T(o),C=Math.floor(i/l),g=i%l,o[i]===0){o[i]=1;for(let s=C+1;s<l;s++){let e=s*l+g;if(o[e]!==1)o[e]=1;else break}for(let s=C-1;s>=0;s--){let e=s*l+g;if(o[e]!==1)o[e]=1;else break}for(let s=g+1;s<l;s++){let e=C*l+s;if(o[e]!==1)o[e]=1;else break}for(let s=g-1;s>=0;s--){let e=C*l+s;if(o[e]!==1)o[e]=1;else break}if(G(o)){console.log("You Lose!"),k("You Lose!"),p(o);return}p(o)}}}function G(v){return v.every(o=>o!==0)}function T(v){let o=[],x=[];for(let i=0;i<=l;i++){x[i]=[];for(let f=0;f<=l;f++){x[i][f]=[];for(let s=0;s<=l;s++){x[i][f][s]=[];for(let e=0;e<=l;e++)x[i][f][s][e]=0}}}function C(i){let f=new Array(i).fill(!1);for(let s=0;s<i;s++)o[s]<i&&(f[o[s]]=!0);for(let s=0;s<i;s++)if(!f[s])return s;return i}for(let i=l-1;i>=0;i--)for(let f=i+1;f<=l;f++)for(let s=l-1;s>=0;s--)for(let e=s+1;e<=l;e++){let r=0;for(let t=i;t<f;t++)for(let n=s;n<e;n++)if(v[t*l+n]!==2){let c=x[i][t][s][n]^x[t+1][f][s][n]^x[i][t][n+1][e]^x[t+1][f][n+1][e];o[r++]=c}x[i][f][s][e]=C(r)}function g(i){let f=v.map(t=>t===0?1:0);f[i]=0;const s=Math.floor(i/l),e=i%l;for(let t=s+1;t<l&&f[t*l+e]===1;t++)f[t*l+e]=0;for(let t=s-1;t>=0&&f[t*l+e]===1;t--)f[t*l+e]=0;for(let t=e+1;t<l&&f[s*l+t]===1;t++)f[s*l+t]=0;for(let t=e-1;t>=0&&f[s*l+t]===1;t--)f[s*l+t]=0;let r=0;for(let t=0;t<l;t++)for(let n=0;n<l;n++)if(f[t*l+n]===1){let c=t,d=n;for(;c<l&&f[c*l+d]===1;)c++;for(c--;d<l&&f[c*l+d]===1;)d++;c++;for(let m=t;m<c;m++)for(let h=n;h<d;h++)f[m*l+h]=0;r^=x[t][c][n][d]}return r}for(let i=0;i<l*l;i++)if(v[i]===0&&g(i)===0)return i;console.log("Fail to Find Grundy == 0");for(let i=0;i<l*l;i++)if(v[i]===0)return i;return-1}return a.jsxs("div",{children:[a.jsx("h2",{children:b}),a.jsx("canvas",{ref:y,width:l*M,height:l*M,onClick:N})]})}const H=()=>{const[u,p]=j.useState(4),[b,k]=j.useState(5),[y,S]=j.useState(null),[w,R]=j.useState({y:0,x:0}),[N,G]=j.useState(0),[T,v]=j.useState(""),o=j.useCallback((e,r)=>{const t=[];for(let n=0;n<e;n++){const c=[];for(let d=0;d<r;d++)c.push(Math.random()<.6?".":"#");t.push(c)}return t},[]),x=j.useCallback(e=>{const r=[],t=[{y:0,x:1},{y:1,x:0},{y:1,x:1}];for(const n of t){const c=e.y+n.y,d=e.x+n.x;c<0||u<=c||d<0||b<=d||!y||y[c][d]==="#"||r.push({y:c,x:d})}return r},[u,b,y]),C=j.useCallback(async e=>{await new Promise(m=>setTimeout(m,800));const r=Array(u).fill(null).map(()=>Array(b).fill(!1));for(let m=u-1;m>=0;m--)for(let h=b-1;h>=0;h--){if(y&&y[m][h]==="#")continue;let P=!1;m+1<u&&y&&y[m+1][h]==="."&&(r[m+1][h]||(P=!0)),h+1<b&&y&&y[m][h+1]==="."&&(r[m][h+1]||(P=!0)),m+1<u&&h+1<b&&y&&y[m+1][h+1]==="."&&(r[m+1][h+1]||(P=!0)),r[m][h]=P}if(!r[e.y][e.x])return{win:!1,path:[]};let t=[],n=0,c=e.y,d=e.x;for(t.push({y:c,x:d});;){const m=x({y:c,x:d});if(m.length===0)break;let h;if(n===0)for(const P of m){const W=P.y,I=P.x;if(!r[W][I]){h=P;break}}else h=m[0];if(h)c=h.y,d=h.x,t.push({y:c,x:d}),n=1-n;else break}return{win:!0,path:t}},[u,b,y]),g=j.useCallback(async()=>{if(!y)return;const e=x(w);if(console.log(e),e.length===0){v("${winner}$ Win!");return}if(N===1){const r=await C(w);let t;if(r.win)t=r.path[0];else{const n=x(w);t=n[Math.floor(Math.random()*n.length)]}R(t),G(0),setTimeout(g,0)}},[y,x,w,N,C]),i=j.useCallback(()=>{if(isNaN(u)||isNaN(b)||u<=0||b<=0){alert("HとWに正の整数を入力してください");return}if(100<u||100<b){alert("HとWはそれぞれ100以下にしてください");return}S(o(u,b)),R({y:0,x:0}),G(0),v(""),g()},[u,b,o,g]),f=j.useCallback((e,r)=>{if(N!==0||!y)return;const n=x(w).find(c=>c.y===e&&c.x===r);n?(R(n),G(1),g()):alert("そこには移動できません")},[y,w,N,x,g]),s=j.useCallback((e,r)=>N!==0?!1:!!x(w).find(n=>n.y===e&&n.x===r),[w,N,x]);return a.jsxs("div",{children:[a.jsx("h1",{children:"GridMoving"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"HeightInput",children:"高さ (H):"}),a.jsx("input",{type:"number",id:"HeightInput",value:u,onChange:e=>p(parseInt(e.target.value))}),a.jsx("label",{htmlFor:"WidthInput",children:"幅 (W):"}),a.jsx("input",{type:"number",id:"WidthInput",value:b,onChange:e=>k(parseInt(e.target.value))}),a.jsx("button",{onClick:i,children:"Generate"})]}),a.jsx("div",{id:"board",children:y&&a.jsx("table",{className:"board-table",children:a.jsx("tbody",{children:y.map((e,r)=>a.jsx("tr",{children:e.map((t,n)=>a.jsx("td",{className:`cell ${r===w.y&&n===w.x?"piece":""} ${s(r,n)?"candidate":""}`,onClick:()=>f(r,n),children:t},n))},r))})})}),a.jsx("div",{id:"result",children:T})]})},Y=({titleName:u,githubLink:p})=>a.jsxs("header",{className:"header",children:[a.jsx("div",{className:"header-left",children:a.jsx("h1",{className:"header-title",children:u})}),a.jsx("div",{className:"header-right",children:a.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",children:a.jsx("svg",{className:"header-github-icon",viewBox:"0 0 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:a.jsx("path",{d:"M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547C20.709 21.637 24 17.324 24 12.25 24 5.896 18.854.75 12.5.75Z"})})})})]}),L=({tabs:u})=>{const[p,b]=j.useState(u[0]);return a.jsxs("div",{className:"tabs-container",children:[a.jsx("div",{className:"tabs-buttons",children:u.map(k=>a.jsx("button",{onClick:()=>b(k),className:p===k?"active":"",children:k.name},k.name))}),a.jsx("div",{className:"tabs-content",children:p.contents})]})};function X({}){return[{title:"AtCoder-Games"},{name:"description",content:"AtCoDeer"}]}const $=_(function(){return a.jsxs("div",{children:[a.jsx(Y,{titleName:"AtCoder Games",githubLink:"https://github.com/amesyu/AtCoder-Games"}),a.jsx(L,{tabs:[{name:"Tic Tac Toe",contents:a.jsx(A,{})},{name:"Grid Nim",contents:a.jsx(E,{})},{name:"Grid Moving",contents:a.jsx(H,{})}]})]})});export{$ as default,X as meta};
