import{w as E}from"./with-props-DvPqDDfd.js";import{r as j,l as f}from"./chunk-IR6S3I6Y-BvsIcvZg.js";function P(){const x=j.useRef(null),[c,k]=j.useState(null),[b,S]=j.useState([]),[C,G]=j.useState("O"),[_,R]=j.useState(null),[M,N]=j.useState(!1),[y,o]=j.useState("ゲーム開始");j.useEffect(()=>{if(x.current){const e=x.current.getContext("2d");k(e);const a=[];for(let t=0;t<3;t++){a[t]=[];for(let l=0;l<3;l++)a[t][l]=""}S(a)}},[]),j.useEffect(()=>{c&&h()},[b,c]);const h=()=>{if(!c||!x.current)return;const e=300,a=300;x.current.width=e,x.current.height=a,c.clearRect(0,0,e,a);const t=3,l=e/t;for(let u=0;u<t;u++)for(let d=0;d<t;d++){const w=d*l,p=u*l;c.strokeStyle="black",c.lineWidth=2,c.strokeRect(w,p,l,l),b[u][d]==="O"?(c.fillStyle="red",c.beginPath(),c.arc(w+l/2,p+l/2,l/3,0,2*Math.PI),c.fill()):b[u][d]==="X"&&(c.fillStyle="blue",c.beginPath(),c.arc(w+l/2,p+l/2,l/3,0,2*Math.PI),c.fill())}},m=e=>{if(!c||_||M)return;const a=x.current;if(!a)return;const t=a.getBoundingClientRect(),l=e.clientX-t.left,u=e.clientY-t.top,d=Math.floor(u/(a.height/3)),w=Math.floor(l/(a.width/3));if(b[d][w]===""){const p=[...b];p[d][w]=C,S(p),g(p)==null&&!M&&s(p)}},g=e=>{const a=[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]];for(let t of a){const[l,u,d]=t;if(e[l[0]][l[1]]&&e[l[0]][l[1]]===e[u[0]][u[1]]&&e[l[0]][l[1]]===e[d[0]][d[1]])return R(e[l[0]][l[1]]),o(e[l[0]][l[1]]+"の勝ち！"),e[l[0]][l[1]]}e.flat().every(t=>t!=="")&&(N(!0),o("引き分け！"))},s=e=>{const a=i(e);if(a){const t=[...e];t[a.i][a.j]="X",S(t),h(),g(t)}},i=e=>{const a=[];for(let t=0;t<3;t++)for(let l=0;l<3;l++)e[t][l]===""&&a.push({i:t,j:l});if(a.length>0){const t=Math.floor(Math.random()*a.length);return a[t]}return null},n=()=>{const e=[];for(let a=0;a<3;a++){e[a]=[];for(let t=0;t<3;t++)e[a][t]=""}S(e),G("O"),R(null),N(!1),o("ゲーム開始")};return f.jsxs("div",{className:"game-container",children:[f.jsx("canvas",{ref:x,onClick:m}),f.jsx("div",{className:"button-container",children:f.jsx("button",{onClick:n,children:"リセット"})}),f.jsx("p",{children:y})]})}const r=19,v=30;function A(){const[x,c]=j.useState(Array(r*r).fill(0).map(()=>Math.random()>.5?2:0)),[k,b]=j.useState("Game in Progress"),S=j.useRef(null),[C,G]=j.useState(null);j.useEffect(()=>{S.current&&G(S.current.getContext("2d"))},[]),j.useEffect(()=>{C&&_()},[x,C]);function _(){C&&(C.clearRect(0,0,r*v,r*v),x.forEach((y,o)=>{const h=o%r*v,m=Math.floor(o/r)*v;C.fillStyle=y===0?"white":y===1?"black":"gray",C.fillRect(h,m,v,v),C.strokeRect(h,m,v,v)}))}function R(y){var i;if(!C||k!=="Game in Progress")return;const o=[...x],h=(i=S.current)==null?void 0:i.getBoundingClientRect();if(!h)return;let m=Math.floor((y.clientY-h.top)/v),g=Math.floor((y.clientX-h.left)/v),s=m*r+g;if(o[s]===0){o[s]=1;for(let n=m+1;n<r;n++){let e=n*r+g;if(o[e]!==1)o[e]=1;else break}for(let n=m-1;n>=0;n--){let e=n*r+g;if(o[e]!==1)o[e]=1;else break}for(let n=g+1;n<r;n++){let e=m*r+n;if(o[e]!==1)o[e]=1;else break}for(let n=g-1;n>=0;n--){let e=m*r+n;if(o[e]!==1)o[e]=1;else break}if(M(o)){console.log("You Win!"),b("You Win!"),c(o);return}if(s=N(o),m=Math.floor(s/r),g=s%r,o[s]===0){o[s]=1;for(let n=m+1;n<r;n++){let e=n*r+g;if(o[e]!==1)o[e]=1;else break}for(let n=m-1;n>=0;n--){let e=n*r+g;if(o[e]!==1)o[e]=1;else break}for(let n=g+1;n<r;n++){let e=m*r+n;if(o[e]!==1)o[e]=1;else break}for(let n=g-1;n>=0;n--){let e=m*r+n;if(o[e]!==1)o[e]=1;else break}if(M(o)){console.log("You Lose!"),b("You Lose!"),c(o);return}c(o)}}}function M(y){return y.every(o=>o!==0)}function N(y){let o=[],h=[];for(let s=0;s<=r;s++){h[s]=[];for(let i=0;i<=r;i++){h[s][i]=[];for(let n=0;n<=r;n++){h[s][i][n]=[];for(let e=0;e<=r;e++)h[s][i][n][e]=0}}}function m(s){let i=new Array(s).fill(!1);for(let n=0;n<s;n++)o[n]<s&&(i[o[n]]=!0);for(let n=0;n<s;n++)if(!i[n])return n;return s}for(let s=r-1;s>=0;s--)for(let i=s+1;i<=r;i++)for(let n=r-1;n>=0;n--)for(let e=n+1;e<=r;e++){let a=0;for(let t=s;t<i;t++)for(let l=n;l<e;l++)if(y[t*r+l]!==2){let u=h[s][t][n][l]^h[t+1][i][n][l]^h[s][t][l+1][e]^h[t+1][i][l+1][e];o[a++]=u}h[s][i][n][e]=m(a)}function g(s){let i=y.map(t=>t===0?1:0);i[s]=0;const n=Math.floor(s/r),e=s%r;for(let t=n+1;t<r&&i[t*r+e]===1;t++)i[t*r+e]=0;for(let t=n-1;t>=0&&i[t*r+e]===1;t--)i[t*r+e]=0;for(let t=e+1;t<r&&i[n*r+t]===1;t++)i[n*r+t]=0;for(let t=e-1;t>=0&&i[n*r+t]===1;t--)i[n*r+t]=0;let a=0;for(let t=0;t<r;t++)for(let l=0;l<r;l++)if(i[t*r+l]===1){let u=t,d=l;for(;u<r&&i[u*r+d]===1;)u++;for(u--;d<r&&i[u*r+d]===1;)d++;u++;for(let w=t;w<u;w++)for(let p=l;p<d;p++)i[w*r+p]=0;a^=h[t][u][l][d]}return a}for(let s=0;s<r*r;s++)if(y[s]===0&&g(s)===0)return s;console.log("Fail to Find Grundy == 0");for(let s=0;s<r*r;s++)if(y[s]===0)return s;return-1}return f.jsxs("div",{children:[f.jsx("h2",{children:k}),f.jsx("canvas",{ref:S,width:r*v,height:r*v,onClick:R})]})}const I=({titleName:x,githubLink:c})=>f.jsxs("header",{className:"header",children:[f.jsx("div",{className:"header-left",children:f.jsx("h1",{className:"header-title",children:x})}),f.jsx("div",{className:"header-right",children:f.jsx("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:f.jsx("svg",{className:"header-github-icon",viewBox:"0 0 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:f.jsx("path",{d:"M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547C20.709 21.637 24 17.324 24 12.25 24 5.896 18.854.75 12.5.75Z"})})})})]}),T=({tabs:x})=>{const[c,k]=j.useState(x[0]);return f.jsxs("div",{className:"tabs-container",children:[f.jsx("div",{className:"tabs-buttons",children:x.map(b=>f.jsx("button",{onClick:()=>k(b),className:c===b?"active":"",children:b.name},b.name))}),f.jsx("div",{className:"tabs-content",children:c.contents})]})};function L({}){return[{title:"AtCoder-Games"},{name:"description",content:"AtCoDeer"}]}const D=E(function(){return f.jsxs("div",{children:[f.jsx(I,{titleName:"AtCoder Games",githubLink:"https://github.com/amesyu/AtCoder-Games"}),f.jsx(T,{tabs:[{name:"Tic Tac Toe",contents:f.jsx(P,{})},{name:"Grid Nim",contents:f.jsx(A,{})}]})]})});export{D as default,L as meta};
