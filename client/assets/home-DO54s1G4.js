import{w as F}from"./with-props-DvPqDDfd.js";import{r as j,l as u}from"./chunk-IR6S3I6Y-BvsIcvZg.js";function $(){const g=j.useRef(null),[y,m]=j.useState(null),[R,p]=j.useState([]),[S,N]=j.useState("O"),[I,T]=j.useState(null),[_,A]=j.useState(!1),[G,h]=j.useState("ゲーム開始");j.useEffect(()=>{if(g.current){const s=g.current.getContext("2d");m(s);const l=[];for(let t=0;t<3;t++){l[t]=[];for(let e=0;e<3;e++)l[t][e]=""}p(l)}},[]),j.useEffect(()=>{y&&C()},[R,y]);const C=()=>{if(!y||!g.current)return;const s=300,l=300;g.current.width=s,g.current.height=l,y.clearRect(0,0,s,l);const t=3,e=s/t;for(let n=0;n<t;n++)for(let r=0;r<t;r++){const i=r*e,f=n*e;y.strokeStyle="black",y.lineWidth=2,y.strokeRect(i,f,e,e),R[n][r]==="O"?(y.fillStyle="red",y.beginPath(),y.arc(i+e/2,f+e/2,e/3,0,2*Math.PI),y.fill()):R[n][r]==="X"&&(y.fillStyle="blue",y.beginPath(),y.arc(i+e/2,f+e/2,e/3,0,2*Math.PI),y.fill())}},k=s=>{if(!y||I||_)return;const l=g.current;if(!l)return;const t=l.getBoundingClientRect(),e=s.clientX-t.left,n=s.clientY-t.top,r=Math.floor(n/(l.height/3)),i=Math.floor(e/(l.width/3));if(R[r][i]===""){const f=[...R];f[r][i]=S,p(f),w(f)==null&&!_&&c(f)}},w=s=>{const l=[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]];for(let t of l){const[e,n,r]=t;if(s[e[0]][e[1]]&&s[e[0]][e[1]]===s[n[0]][n[1]]&&s[e[0]][e[1]]===s[r[0]][r[1]])return T(s[e[0]][e[1]]),h(s[e[0]][e[1]]+"の勝ち！"),s[e[0]][e[1]]}s.flat().every(t=>t!=="")&&(A(!0),h("引き分け！"))},c=s=>{const l=d(s);if(l){const t=[...s];t[l.i][l.j]="X",p(t),C(),w(t)}},d=s=>{const l=[];for(let t=0;t<3;t++)for(let e=0;e<3;e++)s[t][e]===""&&l.push({i:t,j:e});if(l.length>0){const t=Math.floor(Math.random()*l.length);return l[t]}return null},o=()=>{const s=[];for(let l=0;l<3;l++){s[l]=[];for(let t=0;t<3;t++)s[l][t]=""}p(s),N("O"),T(null),A(!1),h("ゲーム開始")};return u.jsxs("div",{className:"game-container",children:[u.jsx("canvas",{ref:g,onClick:k}),u.jsx("div",{className:"button-container",children:u.jsx("button",{onClick:o,children:"リセット"})}),u.jsx("p",{children:G})]})}const a=9,W=50;function U(){const[g,y]=j.useState(Array(a*a).fill(0).map(()=>Math.random()>.5?2:0)),[m,R]=j.useState("Game in Progress"),p=j.useRef(null),[S,N]=j.useState(null);j.useEffect(()=>{p.current&&N(p.current.getContext("2d"))},[]),j.useEffect(()=>{S&&I()},[g,S]);function I(){S&&(S.clearRect(0,0,a*W,a*W),g.forEach((G,h)=>{const C=h%a*W,k=Math.floor(h/a)*W;S.fillStyle=G===0?"white":G===1?"black":"gray",S.fillRect(C,k,W,W),S.strokeRect(C,k,W,W)}))}function T(G){var d;if(!S||m!=="Game in Progress")return;const h=[...g],C=(d=p.current)==null?void 0:d.getBoundingClientRect();if(!C)return;let k=Math.floor((G.clientY-C.top)/W),w=Math.floor((G.clientX-C.left)/W),c=k*a+w;if(h[c]===0){h[c]=1;for(let o=k+1;o<a;o++){let s=o*a+w;if(h[s]!==1)h[s]=1;else break}for(let o=k-1;o>=0;o--){let s=o*a+w;if(h[s]!==1)h[s]=1;else break}for(let o=w+1;o<a;o++){let s=k*a+o;if(h[s]!==1)h[s]=1;else break}for(let o=w-1;o>=0;o--){let s=k*a+o;if(h[s]!==1)h[s]=1;else break}if(_(h)){console.log("You Win!"),R("You Win!"),y(h);return}if(c=A(h),k=Math.floor(c/a),w=c%a,h[c]===0){h[c]=1;for(let o=k+1;o<a;o++){let s=o*a+w;if(h[s]!==1)h[s]=1;else break}for(let o=k-1;o>=0;o--){let s=o*a+w;if(h[s]!==1)h[s]=1;else break}for(let o=w+1;o<a;o++){let s=k*a+o;if(h[s]!==1)h[s]=1;else break}for(let o=w-1;o>=0;o--){let s=k*a+o;if(h[s]!==1)h[s]=1;else break}if(_(h)){console.log("You Lose!"),R("You Lose!"),y(h);return}y(h)}}}function _(G){return G.every(h=>h!==0)}function A(G){let h=[],C=[];for(let c=0;c<=a;c++){C[c]=[];for(let d=0;d<=a;d++){C[c][d]=[];for(let o=0;o<=a;o++){C[c][d][o]=[];for(let s=0;s<=a;s++)C[c][d][o][s]=0}}}function k(c){let d=new Array(c).fill(!1);for(let o=0;o<c;o++)h[o]<c&&(d[h[o]]=!0);for(let o=0;o<c;o++)if(!d[o])return o;return c}for(let c=a-1;c>=0;c--)for(let d=c+1;d<=a;d++)for(let o=a-1;o>=0;o--)for(let s=o+1;s<=a;s++){let l=0;for(let t=c;t<d;t++)for(let e=o;e<s;e++)if(G[t*a+e]!==2){let n=C[c][t][o][e]^C[t+1][d][o][e]^C[c][t][e+1][s]^C[t+1][d][e+1][s];h[l++]=n}C[c][d][o][s]=k(l)}function w(c){let d=G.map(t=>t===1?0:1);d[c]=0;const o=Math.floor(c/a),s=c%a;for(let t=o+1;t<a&&d[t*a+s]===1;t++)d[t*a+s]=0;for(let t=o-1;t>=0&&d[t*a+s]===1;t--)d[t*a+s]=0;for(let t=s+1;t<a&&d[o*a+t]===1;t++)d[o*a+t]=0;for(let t=s-1;t>=0&&d[o*a+t]===1;t--)d[o*a+t]=0;let l=0;for(let t=0;t<a;t++)for(let e=0;e<a;e++)if(d[t*a+e]===1){let n=t,r=e;for(;n<a&&d[n*a+r]===1;)n++;for(n--;r<a&&d[n*a+r]===1;)r++;n++;for(let i=t;i<n;i++)for(let f=e;f<r;f++)d[i*a+f]=0;l^=C[t][n][e][r]}return l}for(let c=0;c<a*a;c++)if(G[c]===0&&w(c)===0)return c;console.log("Fail to Find Grundy == 0");for(let c=0;c<a*a;c++)if(G[c]===0)return c;return-1}return u.jsxs("div",{children:[u.jsx("h2",{children:m}),u.jsx("canvas",{ref:p,width:a*W,height:a*W,onClick:T})]})}const K=()=>{const[g,y]=j.useState(8),[m,R]=j.useState(7),[p,S]=j.useState(null),[N,I]=j.useState({y:0,x:0}),[T,_]=j.useState(0),[A,G]=j.useState(!1),[h,C]=j.useState(""),k=j.useCallback((e,n)=>{const r=[];for(let i=0;i<e;i++){const f=[];for(let b=0;b<n;b++)i!=0||b!=0?f.push(Math.random()<.6666?".":"#"):f.push(".");r.push(f)}return r},[]),w=j.useCallback(e=>{const n=[],r=[{y:0,x:1},{y:1,x:0},{y:1,x:1}];for(const i of r){const f=e.y+i.y,b=e.x+i.x;f<0||g<=f||b<0||m<=b||!p||p[f][b]==="#"||n.push({y:f,x:b})}return n},[g,m,p]),c=j.useCallback(e=>e.length===0?(G(!1),C((T===0?"CPU":"You")+"Win!"),!0):!1,[N,T]),d=j.useCallback(async e=>{const n=Array(g).fill(null).map(()=>Array(m).fill(!1));for(let M=g-1;M>=0;M--)for(let P=m-1;P>=0;P--){if(p&&p[M][P]==="#")continue;let Y=!1;M+1<g&&p&&p[M+1][P]==="."&&(n[M+1][P]||(Y=!0)),P+1<m&&p&&p[M][P+1]==="."&&(n[M][P+1]||(Y=!0)),M+1<g&&P+1<m&&p&&p[M+1][P+1]==="."&&(n[M+1][P+1]||(Y=!0)),n[M][P]=Y}if(!n[e.y][e.x])return{win:!1,path:[]};let r=[],i=0,f=e.y,b=e.x;for(r.push({y:f,x:b});;){const M=w({y:f,x:b});if(M.length===0)break;let P;if(i===0)for(const Y of M){const Z=Y.y,D=Y.x;if(!n[Z][D]){P=Y;break}}else P=M[0];if(P)f=P.y,b=P.x,r.push({y:f,x:b}),i=1-i;else break}return{win:!0,path:r}},[g,m,p,w]),o=j.useCallback(async()=>{if(!A||!p)return;const e=w(N);if(!c(e)&&T===1){const n=await d(N);let r;n.win?r=n.path[1]:r=e[Math.floor(Math.random()*e.length)],I(r),_(0)}},[A,p,N,T,w,d]),s=j.useCallback(()=>{if(isNaN(g)||isNaN(m)||g<=0||m<=0){alert("HとWに正の整数を入力してください");return}if(50<g||50<m){alert("HとWはそれぞれ50以下にしてください");return}S(k(g,m)),I({y:0,x:0}),_(0),G(!0),C("Game Start"),o()},[g,m,k,o]),l=j.useCallback((e,n)=>{if(!A||T!==0||!p)return;const r=w(N);if(c(r))return;const i=r.find(f=>f.y===e&&f.x===n);i?(C(""),I(i),_(1)):C("そこには移動できません")},[A,p,N,T,w,o]),t=j.useCallback((e,n)=>!A||T!==0?!1:!!w(N).find(i=>i.y===e&&i.x===n),[A,N,T,w]);return j.useEffect(()=>{if(A&&T===1)o();else if(A&&T===0){const e=w(N);c(e)}},[A,T,N,o,w,c]),u.jsxs("div",{children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"HeightInput",children:"高さ (H):"}),u.jsx("input",{type:"number",id:"HeightInput",value:g,onChange:e=>y(parseInt(e.target.value))}),u.jsx("label",{htmlFor:"WidthInput",children:"幅 (W):"}),u.jsx("input",{type:"number",id:"WidthInput",value:m,onChange:e=>R(parseInt(e.target.value))}),u.jsx("div",{className:"tabs-buttons",children:u.jsx("button",{className:"button",onClick:s,disabled:A,children:"Generate"})})]}),u.jsx("div",{id:"board",children:p&&u.jsx("table",{className:"board-table",children:u.jsx("tbody",{children:p.map((e,n)=>u.jsx("tr",{children:e.map((r,i)=>u.jsx("td",{className:`cell ${n===N.y&&i===N.x?"piece":""} ${t(n,i)?"candidate":""}`,onClick:()=>l(n,i),children:r},i))},n))})})}),u.jsx("div",{id:"result",children:h})]})},O=({titleName:g,githubLink:y})=>u.jsxs("header",{className:"header",children:[u.jsx("div",{className:"header-left",children:u.jsx("h1",{className:"header-title",children:g})}),u.jsx("div",{className:"header-right",children:u.jsx("a",{href:y,target:"_blank",rel:"noopener noreferrer",children:u.jsx("svg",{className:"header-github-icon",viewBox:"0 0 28 28",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:u.jsx("path",{d:"M12.5.75C6.146.75 1 5.896 1 12.25c0 5.089 3.292 9.387 7.863 10.91.575.101.79-.244.79-.546 0-.273-.014-1.178-.014-2.142-2.889.532-3.636-.704-3.866-1.35-.13-.331-.69-1.352-1.18-1.625-.402-.216-.977-.748-.014-.762.906-.014 1.553.834 1.769 1.179 1.035 1.74 2.688 1.25 3.349.948.1-.747.402-1.25.733-1.538-2.559-.287-5.232-1.279-5.232-5.678 0-1.25.445-2.285 1.178-3.09-.115-.288-.517-1.467.115-3.048 0 0 .963-.302 3.163 1.179.92-.259 1.897-.388 2.875-.388.977 0 1.955.13 2.875.388 2.2-1.495 3.162-1.179 3.162-1.179.633 1.581.23 2.76.115 3.048.733.805 1.179 1.825 1.179 3.09 0 4.413-2.688 5.39-5.247 5.678.417.36.776 1.05.776 2.128 0 1.538-.014 2.774-.014 3.162 0 .302.216.662.79.547C20.709 21.637 24 17.324 24 12.25 24 5.896 18.854.75 12.5.75Z"})})})})]}),q=({tabs:g})=>{const[y,m]=j.useState(g[0]);return u.jsxs("div",{className:"tabs-container",children:[u.jsx("div",{className:"tabs-buttons",children:g.map(R=>u.jsx("button",{onClick:()=>m(R),className:y===R?"active":"",children:R.name},R.name))}),u.jsx("div",{className:"tabs-content",children:y.contents})]})},v=16,x=40,E=v*x;let H=0,X=0;const L=[[[0,0],[1,0],[0,1],[1,1]],[[0,0],[1,0],[2,0],[3,0]],[[0,0],[0,1],[0,2],[0,3]],[[0,0],[1,0],[1,1],[2,1]],[[0,0],[0,1],[-1,1],[-1,2]],[[0,0],[1,0],[-1,1],[0,1]],[[0,0],[0,1],[1,1],[1,2]],[[0,0],[0,1],[1,1],[2,1]],[[0,0],[0,1],[0,2],[-1,2]],[[0,0],[1,0],[2,0],[2,1]],[[0,0],[1,0],[0,1],[0,2]],[[0,0],[0,1],[0,2],[1,2]],[[0,0],[0,1],[-1,1],[-2,1]],[[0,0],[1,0],[1,1],[1,2]],[[0,0],[0,1],[1,0],[2,0]],[[0,0],[1,0],[2,0],[1,1]],[[0,0],[0,1],[0,2],[1,1]],[[0,0],[-1,1],[0,1],[1,1]],[[0,0],[0,1],[-1,1],[0,2]]];function B(){const g=j.useRef(null),y=Array.from({length:v},()=>Array(v).fill(!1));let m=[];const R=Array.from({length:v},()=>Array(v).fill("")),p=Array.from({length:v},()=>Array(v).fill(""));let S=[];const[N,I]=j.useState(0);j.useEffect(()=>{const l=g.current;if(!l)return;const t=l.getContext("2d");if(t){l.width=E,l.height=E,t.clearRect(0,0,E,E),T(t),C(t);for(let e=0;e<m.length;e++){let n=h();for(let r=0;r<4;r++){let i=m[e][r][0],f=m[e][r][1];R[i][f]=n[r],t.fillStyle="white",t.font=`${x*.6}px Arial`,t.fillText(n[r],i*x+x*.1,f*x+x*.75)}}return l.addEventListener("click",s),()=>{l.removeEventListener("click",s)}}},[]);const T=l=>{l.strokeStyle="white",l.lineWidth=1;for(let t=0;t<=v;t++)l.beginPath(),l.moveTo(t*x,0),l.lineTo(t*x,E),l.stroke(),l.beginPath(),l.moveTo(0,t*x),l.lineTo(E,t*x),l.stroke();for(let t=0;t<v;t++)for(let e=0;e<v;e++)l.strokeStyle="white",l.fillRect(t*x,e*x,x,x)},_=()=>{for(;;){const l=Math.floor(Math.random()*v*v),t=Math.floor(l/v),e=l%v;if(!y[t][e])return{x:t,y:e}}},A=()=>L[Math.floor(Math.random()*L.length)],G=(l,t,e)=>e.every(([n,r])=>{const i=l+n,f=t+r;return i>=0&&i<v&&f>=0&&f<v&&!y[i][f]}),h=()=>{const l=["こ","ん","な","ん"];for(let t=l.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[l[t],l[e]]=[l[e],l[t]]}return l.join("")},C=l=>{for(H=0;;){const{x:t,y:e}=_(),n=A();if(G(t,e,n))m.push([]),n.forEach(([r,i])=>{const f=t+r,b=e+i;y[f][b]=!0,H++,m[m.length-1].push([f,b])});else{if(H++,H==2e3)break;continue}}for(let t=0;t<v;t++)for(let e=0;e<v;e++)y[t][e]||k(l,t,e)},k=(l,t,e)=>{l.fillStyle="white",l.fillRect(t*x,e*x,x,x)},w=(l,t,e)=>{let n=["rgba(255, 0, 0, 0.3)","rgba(0, 0, 255, 0.3)","rgba(0, 255, 0, 0.3)","rgba(255, 255, 0, 0.3)","rgba(255, 165, 0, 0.3)","rgba(128, 0, 128, 0.3)","rgba(255, 192, 203, 0.3)"],r=n[Math.floor(Math.random()*n.length)];S.length%4!=0&&(r=p[S[S.length-1][0]][S[S.length-1][1]]),l.fillStyle=r,l.fillRect(t*x,e*x,x,x),p[t][e]=r,S.push([t,e])},c=()=>{let l=["rgba(255, 0, 0, 0.3)","rgba(0, 0, 255, 0.3)","rgba(0, 255, 0, 0.3)","rgba(255, 255, 0, 0.3)","rgba(255, 165, 0, 0.3)","rgba(128, 0, 128, 0.3)","rgba(255, 192, 203, 0.3)"];const t=g.current;if(!t)return;const e=t.getContext("2d");if(e){for(let n=0;n<m.length;n++){let r=l[Math.floor(Math.random()*l.length)];for(let i=0;i<4;i++){let f=m[n][i][0],b=m[n][i][1];e.fillStyle=r,X==0?e.strokeStyle=r:e.strokeStyle="rgba(0,0,0, 1)",e.lineWidth=2,e.fillRect(f*x,b*x,x,x)}}if(X==1){e&&(e.clearRect(0,0,E,E),e.fillStyle="black",e.fillRect(0,0,E,E)),T(e);for(let n=0;n<m.length;n++)for(let r=0;r<4;r++){let i=m[n][r][0],f=m[n][r][1],b=R[i][f];e.fillStyle="white",e.font=`${x*.6}px Arial`,e.fillText(b,i*x+x*.1,f*x+x*.75)}for(let n=0;n<v;n++)for(let r=0;r<v;r++)y[n][r]||k(e,n,r),p[n][r]=""}X=1-X}},d=(l,t,e,n)=>Math.abs(l-e)+Math.abs(t-n),o=()=>{let l=0;const t=g.current;if(!t)return;const e=t.getContext("2d");if(e){for(let n=0;n<S.length;n+=4){let r=[],i=[];for(let b=0;b<4&&!(n+b>=S.length);b++)r.push(S[n+b]),i.push(R[S[n+b][0]][S[n+b][1]]);if(i.sort(),i[0]!="こ"||i[1]!="な"||i[2]!="ん"||i[3]!="ん")continue;let f=0;for(let b=0;b<4;b++)for(let M=b+1;M<4;M++)d(r[b][0],r[b][1],r[M][0],r[M][1])==1&&f++;f<3||l++}I(l),e&&(e.clearRect(0,0,E,E),e.fillStyle="black",e.fillRect(0,0,E,E)),T(e);for(let n=0;n<m.length;n++)for(let r=0;r<4;r++){let i=m[n][r][0],f=m[n][r][1],b=R[i][f];e.fillStyle="white",e.font=`${x*.6}px Arial`,e.fillText(b,i*x+x*.1,f*x+x*.75)}for(let n=0;n<v;n++)for(let r=0;r<v;r++)y[n][r]||k(e,n,r),p[n][r]=""}},s=l=>{const t=g.current;if(!t)return;const e=t.getContext("2d");if(!e)return;const n=t.getBoundingClientRect(),r=Math.floor((l.clientX-n.left)/x),i=Math.floor((l.clientY-n.top)/x);p[r][i]==""&&w(e,r,i)};return u.jsxs("div",{children:[u.jsx("canvas",{ref:g}),u.jsx("button",{onClick:c,children:"answer"}),u.jsx("br",{}),u.jsx("button",{onClick:o,children:"submit"}),u.jsx("p",{children:N})]})}function Q({}){return[{title:"AtCoder-Games"},{name:"description",content:"AtCoDeer"}]}const z=F(function(){return u.jsxs("div",{children:[u.jsx(O,{titleName:"AtCoder Games",githubLink:"https://github.com/amesyu/AtCoder-Games"}),u.jsx(q,{tabs:[{name:"Tic Tac Toe",contents:u.jsx($,{})},{name:"Grid Nim",contents:u.jsx(U,{})},{name:"Grid Moving",contents:u.jsx(K,{})},{name:"Konnan",contents:u.jsx(B,{})}]})]})});export{z as default,Q as meta};
